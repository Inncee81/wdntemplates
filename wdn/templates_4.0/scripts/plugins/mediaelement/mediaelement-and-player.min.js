/*!
 *
 * MediaElement.js
 * HTML5 <video> and <audio> shim and player
 * http://mediaelementjs.com/
 *
 * Creates a JavaScript object that mimics HTML5 MediaElement API
 * for browsers that don't understand HTML5 or can't play the provided codec
 * Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3
 *
 * Copyright 2010-2014, John Dyer (http://j.hn)
 * License: MIT
 *
 */
define(["jquery"],function(e){var t=t||{};t.version="2.17.0",t.meIndex=0,t.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube","video/dailymotion","video/x-dailymotion","application/x-mpegURL"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},t.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t=0,i,n="",o="",s,a,r,l,d,u=document.getElementsByTagName("script"),c=u.length,p=e.length;c>t;t++){for(r=u[t].src,s=r.lastIndexOf("/"),s>-1?(d=r.substring(s+1),l=r.substring(0,s+1)):(d=r,l=""),i=0;p>i;i++)if(o=e[i],a=d.indexOf(o),a>-1){n=l;break}if(""!==n)break}return n},secondsToTimeCode:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var o=Math.floor(e/3600)%24,s=Math.floor(e/60)%60,a=Math.floor(e%60),r=Math.floor((e%1*n).toFixed(3)),l=(t||o>0?(10>o?"0"+o:o)+":":"")+(10>s?"0"+s:s)+":"+(10>a?"0"+a:a)+(i?":"+(10>r?"0"+r:r):"");return l},timeCodeToSeconds:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var o=e.split(":"),s=parseInt(o[0],10),a=parseInt(o[1],10),r=parseInt(o[2],10),l=0,d=0;return i&&(l=parseInt(o[3])/n),d=3600*s+60*a+r+l},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,i=-1!=e.indexOf(".")?e.split(".")[1].length:0,n=1;e=e.split(":").reverse();for(var o=0;o<e.length;o++)n=1,o>0&&(n=Math.pow(60,o)),t+=Number(e[o])*n;return Number(t.toFixed(i))},removeSwf:function(e){var i=document.getElementById(e);i&&/object|embed/i.test(i.nodeName)&&(t.MediaFeatures.isIE?(i.style.display="none",function(){4==i.readyState?t.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}},t.PluginDetector={hasPluginVersion:function(e,t){var i=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,i[0]>t[0]||i[0]==t[0]&&i[1]>t[1]||i[0]==t[0]&&i[1]==t[1]&&i[2]>=t[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,i,n,o){this.plugins[e]=this.detectPlugin(t,i,n,o)},detectPlugin:function(e,t,i,n){var o=[0,0,0],s,a,r;if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[e]){if(s=this.nav.plugins[e].description,s&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(o=s.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),a=0;a<o.length;a++)o[a]=parseInt(o[a].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{r=new ActiveXObject(i),r&&(o=n(r))}catch(l){}return o}},t.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],i=e.GetVariable("$version");return i&&(i=i.split(" ")[1].split(","),t=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]),t}),t.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],i=function(e,t,i,n){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[i]+=n;t[i]-=n};return i(e,t,0,1),i(e,t,1,1),i(e,t,2,1e4),i(e,t,2,1e3),i(e,t,2,100),i(e,t,2,10),i(e,t,2,1),i(e,t,3,1),t}),t.MediaFeatures={init:function(){var e=this,i=document,n=t.PluginDetector.nav,o=t.PluginDetector.ua.toLowerCase(),s,a,r=["source","track","audio","video"];e.isiPad=null!==o.match(/ipad/i),e.isiPhone=null!==o.match(/iphone/i),e.isiOS=e.isiPhone||e.isiPad,e.isAndroid=null!==o.match(/android/i),e.isBustedAndroid=null!==o.match(/android 2\.[12]/),e.isBustedNativeHTTPS="https:"===location.protocol&&(null!==o.match(/android [12]\./)||null!==o.match(/macintosh.* version.* safari/)),e.isIE=-1!=n.appName.toLowerCase().indexOf("microsoft")||null!==n.appName.toLowerCase().match(/trident/gi),e.isChrome=null!==o.match(/chrome/gi),e.isChromium=null!==o.match(/chromium/gi),e.isFirefox=null!==o.match(/firefox/gi),e.isWebkit=null!==o.match(/webkit/gi),e.isGecko=null!==o.match(/gecko/gi)&&!e.isWebkit&&!e.isIE,e.isOpera=null!==o.match(/opera/gi),e.hasTouch="ontouchstart"in window,e.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(s=0;s<r.length;s++)a=document.createElement(r[s]);e.supportsMediaTag="undefined"!=typeof a.canPlayType||e.isBustedAndroid;try{a.canPlayType("video/mp4")}catch(l){e.supportsMediaTag=!1}e.hasSemiNativeFullScreen="undefined"!=typeof a.webkitEnterFullscreen,e.hasNativeFullscreen="undefined"!=typeof a.requestFullscreen,e.hasWebkitNativeFullScreen="undefined"!=typeof a.webkitRequestFullScreen,e.hasMozNativeFullScreen="undefined"!=typeof a.mozRequestFullScreen,e.hasMsNativeFullScreen="undefined"!=typeof a.msRequestFullscreen,e.hasTrueNativeFullScreen=e.hasWebkitNativeFullScreen||e.hasMozNativeFullScreen||e.hasMsNativeFullScreen,e.nativeFullScreenEnabled=e.hasTrueNativeFullScreen,e.hasMozNativeFullScreen?e.nativeFullScreenEnabled=document.mozFullScreenEnabled:e.hasMsNativeFullScreen&&(e.nativeFullScreenEnabled=document.msFullscreenEnabled),e.isChrome&&(e.hasSemiNativeFullScreen=!1),e.hasTrueNativeFullScreen&&(e.fullScreenEventName="",e.hasWebkitNativeFullScreen?e.fullScreenEventName="webkitfullscreenchange":e.hasMozNativeFullScreen?e.fullScreenEventName="mozfullscreenchange":e.hasMsNativeFullScreen&&(e.fullScreenEventName="MSFullscreenChange"),e.isFullScreen=function(){return e.hasMozNativeFullScreen?i.mozFullScreen:e.hasWebkitNativeFullScreen?i.webkitIsFullScreen:e.hasMsNativeFullScreen?null!==i.msFullscreenElement:void 0},e.requestFullScreen=function(t){e.hasWebkitNativeFullScreen?t.webkitRequestFullScreen():e.hasMozNativeFullScreen?t.mozRequestFullScreen():e.hasMsNativeFullScreen&&t.msRequestFullscreen()},e.cancelFullScreen=function(){e.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():e.hasMozNativeFullScreen?document.mozCancelFullScreen():e.hasMsNativeFullScreen&&document.msExitFullscreen()}),e.hasSemiNativeFullScreen&&o.match(/mac os x 10_5/i)&&(e.hasNativeFullScreen=!1,e.hasSemiNativeFullScreen=!1)}},t.MediaFeatures.init(),t.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var i,n;for(i=0;i<e.length;i++)if(n=e[i],this.canPlayType(n.type)){this.src=n.src;break}}},setVideoSize:function(e,t){this.width=e,this.height=t}},t.PluginMediaElement=function(e,t,i){this.id=e,this.pluginType=t,this.src=i,this.events={},this.attributes={}},t.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var i,n,o,s=t.plugins[this.pluginType];for(i=0;i<s.length;i++)if(o=s[i],t.PluginDetector.hasPluginVersion(this.pluginType,o.version))for(n=0;n<o.types.length;n++)if(e==o.types[n])return"probably";return""},positionFullscreenButton:function(e,t,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(e),Math.floor(t),i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(t.Utility.absolutizeUrl(e)),this.src=t.Utility.absolutizeUrl(e);else{var i,n;for(i=0;i<e.length;i++)if(n=e[i],this.canPlayType(n.type)){this.pluginApi.setSrc(t.Utility.absolutizeUrl(n.src)),this.src=t.Utility.absolutizeUrl(e);break}}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t,i){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var i=this.events[e];if(!i)return!0;if(!t)return this.events[e]=[],!0;for(var n=0;n<i.length;n++)if(i[n]===t)return this.events[e].splice(n,1),!0;return!1},dispatchEvent:function(e){var t,i,n=this.events[e];if(n)for(i=Array.prototype.slice.call(arguments,1),t=0;t<n.length;t++)n[t].apply(this,i)},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){t.Utility.removeSwf(this.pluginElement.id),t.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},t.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,i){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=i},unregisterPluginElement:function(e){delete this.pluginMediaElements[e],delete this.htmlMediaElements[e]},initPlugin:function(e){var t=this.pluginMediaElements[e],i=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}null!=t.pluginApi&&t.success&&t.success(t,i)}},fireEvent:function(e,t,i){var n,o,s,a=this.pluginMediaElements[e];if(a){n={type:t,target:a};for(o in i)a[o]=i[o],n[o]=i[o];s=i.bufferedTime||0,n.target.buffered=n.buffered={start:function(e){return 0},end:function(e){return s},length:1},a.dispatchEvent(n.type,n)}}},t.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:t.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},t.MediaElement=function(e,i){return t.HtmlMediaElementShim.create(e,i)},t.HtmlMediaElementShim={create:function(e,i){var n=t.MediaElementDefaults,o="string"==typeof e?document.getElementById(e):e,s=o.tagName.toLowerCase(),a="audio"===s||"video"===s,r=a?o.getAttribute("src"):o.getAttribute("href"),l=o.getAttribute("poster"),d=o.getAttribute("autoplay"),u=o.getAttribute("preload"),c=o.getAttribute("controls"),p,m;for(m in i)n[m]=i[m];return r="undefined"==typeof r||null===r||""==r?null:r,l="undefined"==typeof l||null===l?"":l,u="undefined"==typeof u||null===u||"false"===u?"none":u,d=!("undefined"==typeof d||null===d||"false"===d),c=!("undefined"==typeof c||null===c||"false"===c),p=this.determinePlayback(o,n,t.MediaFeatures.supportsMediaTag,a,r),p.url=null!==p.url?t.Utility.absolutizeUrl(p.url):"","native"==p.method?(t.MediaFeatures.isBustedAndroid&&(o.src=p.url,o.addEventListener("click",function(){o.play()},!1)),this.updateNative(p,n,d,u)):""!==p.method?this.createPlugin(p,n,l,d,u,c):(this.createErrorMessage(p,n,l),this)},determinePlayback:function(e,i,n,o,s){var a=[],r,l,d,u,c,p,m={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!=e.tagName.toLowerCase()},h,f,v,g,y;if("undefined"!=typeof i.type&&""!==i.type)if("string"==typeof i.type)a.push({type:i.type,url:s});else for(r=0;r<i.type.length;r++)a.push({type:i.type[r],url:s});else if(null!==s)p=this.formatType(s,e.getAttribute("type")),a.push({type:p,url:s});else for(r=0;r<e.childNodes.length;r++)c=e.childNodes[r],1==c.nodeType&&"source"==c.tagName.toLowerCase()&&(s=c.getAttribute("src"),p=this.formatType(s,c.getAttribute("type")),y=c.getAttribute("media"),(!y||!window.matchMedia||window.matchMedia&&window.matchMedia(y).matches)&&a.push({type:p,url:s}));if(!o&&a.length>0&&null!==a[0].url&&this.getTypeFromFile(a[0].url).indexOf("audio")>-1&&(m.isVideo=!1),t.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),t.MediaFeatures.isChromium&&(e.canPlayType=function(e){return null!==e.match(/video\/(webm|ogv|ogg)/gi)?"maybe":""}),!(!n||"auto"!==i.mode&&"auto_plugin"!==i.mode&&"native"!==i.mode||t.MediaFeatures.isBustedNativeHTTPS&&i.httpsBasicAuthSite===!0)){for(o||(g=document.createElement(m.isVideo?"video":"audio"),e.parentNode.insertBefore(g,e),e.style.display="none",m.htmlMediaElement=e=g),r=0;r<a.length;r++)if("video/m3u8"==a[r].type||""!==e.canPlayType(a[r].type).replace(/no/,"")||""!==e.canPlayType(a[r].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==e.canPlayType(a[r].type.replace(/m4a/,"mp4")).replace(/no/,"")){m.method="native",m.url=a[r].url;break}if("native"===m.method&&(null!==m.url&&(e.src=m.url),"auto_plugin"!==i.mode))return m}if("auto"===i.mode||"auto_plugin"===i.mode||"shim"===i.mode)for(r=0;r<a.length;r++)for(p=a[r].type,l=0;l<i.plugins.length;l++)for(h=i.plugins[l],f=t.plugins[h],d=0;d<f.length;d++)if(v=f[d],null==v.version||t.PluginDetector.hasPluginVersion(h,v.version))for(u=0;u<v.types.length;u++)if(p==v.types[u])return m.method=h,m.url=a[r].url,m;return"auto_plugin"===i.mode&&"native"===m.method?m:(""===m.method&&a.length>0&&(m.url=a[0].url),m)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){e=e.split("?")[0];var t=e.substring(e.lastIndexOf(".")+1).toLowerCase();return(/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video":"audio")+"/"+this.getTypeFromExtension(t)},getTypeFromExtension:function(e){switch(e){case"mp4":case"m4v":case"m4a":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},createErrorMessage:function(e,i,n){var o=e.htmlMediaElement,s=document.createElement("div"),a=i.customError;s.className="me-cannotplay";try{s.style.width=o.width+"px",s.style.height=o.height+"px"}catch(r){}a||(a='<a href="'+e.url+'">',""!==n&&(a+='<img src="'+n+'" width="100%" height="100%" alt="" />'),a+="<span>"+t.i18n.t("Download File")+"</span></a>"),s.innerHTML=a,o.parentNode.insertBefore(s,o),o.style.display="none",i.error(o)},createPlugin:function(e,i,n,o,s,a){var r=e.htmlMediaElement,l=1,d=1,u="me_"+e.method+"_"+t.meIndex++,c=new t.PluginMediaElement(u,e.method,e.url),p=document.createElement("div"),m,h,f;c.tagName=r.tagName;for(var v=0;v<r.attributes.length;v++){var g=r.attributes[v];g.specified&&c.setAttribute(g.name,g.value)}for(h=r.parentNode;null!==h&&null!=h.tagName&&"body"!==h.tagName.toLowerCase()&&null!=h.parentNode&&null!=h.parentNode.tagName&&null!=h.parentNode.constructor&&"ShadowRoot"===h.parentNode.constructor.name;){if("p"===h.parentNode.tagName.toLowerCase()){h.parentNode.parentNode.insertBefore(h,h.parentNode);break}h=h.parentNode}switch(e.isVideo?(l=i.pluginWidth>0?i.pluginWidth:i.videoWidth>0?i.videoWidth:null!==r.getAttribute("width")?r.getAttribute("width"):i.defaultVideoWidth,d=i.pluginHeight>0?i.pluginHeight:i.videoHeight>0?i.videoHeight:null!==r.getAttribute("height")?r.getAttribute("height"):i.defaultVideoHeight,l=t.Utility.encodeUrl(l),d=t.Utility.encodeUrl(d)):i.enablePluginDebug&&(l=320,d=240),c.success=i.success,t.MediaPluginBridge.registerPluginElement(u,c,r),p.className="me-plugin",p.id=u+"_container",e.isVideo?r.parentNode.insertBefore(p,r):document.body.insertBefore(p,document.body.childNodes[0]),f=["id="+u,"jsinitfunction=mejs.MediaPluginBridge.initPlugin","jscallbackfunction=mejs.MediaPluginBridge.fireEvent","isvideo="+(e.isVideo?"true":"false"),"autoplay="+(o?"true":"false"),"preload="+s,"width="+l,"startvolume="+i.startVolume,"timerrate="+i.timerRate,"flashstreamer="+i.flashStreamer,"height="+d,"pseudostreamstart="+i.pseudoStreamingStartQueryParam],null!==e.url&&("flash"==e.method?f.push("file="+t.Utility.encodeUrl(e.url)):f.push("file="+e.url)),i.enablePluginDebug&&f.push("debug=true"),i.enablePluginSmoothing&&f.push("smoothing=true"),i.enablePseudoStreaming&&f.push("pseudostreaming=true"),a&&f.push("controls=true"),i.pluginVars&&(f=f.concat(i.pluginVars)),e.method){case"silverlight":p.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+u+'" name="'+u+'" width="'+l+'" height="'+d+'" class="mejs-shim"><param name="initParams" value="'+f.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+i.pluginPath+i.silverlightName+'" /></object>';break;case"flash":t.MediaFeatures.isIE?(m=document.createElement("div"),p.appendChild(m),m.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+u+'" width="'+l+'" height="'+d+'" class="mejs-shim"><param name="movie" value="'+i.pluginPath+i.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+f.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><param name="scale" value="default" /></object>'):p.innerHTML='<embed id="'+u+'" name="'+u+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+i.pluginPath+i.flashName+'" flashvars="'+f.join("&")+'" width="'+l+'" height="'+d+'" scale="default"class="mejs-shim"></embed>';break;case"youtube":var y;-1!=e.url.lastIndexOf("youtu.be")?(y=e.url.substr(e.url.lastIndexOf("/")+1),-1!=y.indexOf("?")&&(y=y.substr(0,y.indexOf("?")))):y=e.url.substr(e.url.lastIndexOf("=")+1),youtubeSettings={container:p,containerId:p.id,pluginMediaElement:c,pluginId:u,videoId:y,height:d,width:l},t.PluginDetector.hasPluginVersion("flash",[10,0,0])?t.YouTubeApi.createFlash(youtubeSettings):t.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":var b=u+"_player";if(c.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),p.innerHTML='<iframe src="//player.vimeo.com/video/'+c.vimeoid+"?api=1&portrait=0&byline=0&title=0&player_id="+b+'" width="'+l+'" height="'+d+'" frameborder="0" class="mejs-shim" id="'+b+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',"function"==typeof $f){var w=$f(p.childNodes[0]);w.addEvent("ready",function(){function e(e,t,i,n){var o={type:i,target:t};"timeupdate"==i&&(t.currentTime=o.currentTime=n.seconds,t.duration=o.duration=n.duration),t.dispatchEvent(o.type,o)}w.playVideo=function(){w.api("play")},w.stopVideo=function(){w.api("unload")},w.pauseVideo=function(){w.api("pause")},w.seekTo=function(e){w.api("seekTo",e)},w.setVolume=function(e){w.api("setVolume",e)},w.setMuted=function(e){e?(w.lastVolume=w.api("getVolume"),w.api("setVolume",0)):(w.api("setVolume",w.lastVolume),delete w.lastVolume)},w.addEvent("play",function(){e(w,c,"play"),e(w,c,"playing")}),w.addEvent("pause",function(){e(w,c,"pause")}),w.addEvent("finish",function(){e(w,c,"ended")}),w.addEvent("playProgress",function(t){e(w,c,"timeupdate",t)}),c.pluginElement=p,c.pluginApi=w,t.MediaPluginBridge.initPlugin(u)})}else console.warn("You need to include froogaloop for vimeo to work")}return r.style.display="none",r.removeAttribute("autoplay"),c},updateNative:function(e,i,n,o){var s=e.htmlMediaElement,a;for(a in t.HtmlMediaElement)s[a]=t.HtmlMediaElement[a];return i.success(s,s),s}},t.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="//www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var i=e.pluginMediaElement,n=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=n,t.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){t.YouTubeApi.createEvent(n,i,"timeupdate")},250)},onStateChange:function(e){t.YouTubeApi.handleStateChange(e.data,n,i)}}})},createEvent:function(e,t,i){var n={type:i,target:t};if(e&&e.getDuration){t.currentTime=n.currentTime=e.getCurrentTime(),t.duration=n.duration=e.getDuration(),n.paused=t.paused,n.ended=t.ended,n.muted=e.isMuted(),n.volume=e.getVolume()/100,n.bytesTotal=e.getVideoBytesTotal(),n.bufferedBytes=e.getVideoBytesLoaded();var o=n.bufferedBytes/n.bytesTotal*n.duration;n.target.buffered=n.buffered={start:function(e){return 0},end:function(e){return o},length:1}}t.dispatchEvent(n.type,n)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var i,n="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";t.MediaFeatures.isIE?(i=document.createElement("div"),e.container.appendChild(i),i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'" class="mejs-shim"><param name="movie" value="'+n+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+n+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(e){var i=this.flashPlayers[e],n=document.getElementById(e),o=i.pluginMediaElement;o.pluginApi=o.pluginElement=n,t.MediaPluginBridge.initPlugin(e),n.cueVideoById(i.videoId);var s=i.containerId+"_callback";window[s]=function(e){t.YouTubeApi.handleStateChange(e,n,o)},n.addEventListener("onStateChange",s),setInterval(function(){t.YouTubeApi.createEvent(n,o,"timeupdate")},250),t.YouTubeApi.createEvent(n,o,"canplay")},handleStateChange:function(e,i,n){switch(e){case-1:n.paused=!0,n.ended=!0,t.YouTubeApi.createEvent(i,n,"loadedmetadata");break;case 0:n.paused=!1,n.ended=!0,t.YouTubeApi.createEvent(i,n,"ended");break;case 1:n.paused=!1,n.ended=!1,t.YouTubeApi.createEvent(i,n,"play"),t.YouTubeApi.createEvent(i,n,"playing");break;case 2:n.paused=!0,n.ended=!1,t.YouTubeApi.createEvent(i,n,"pause");break;case 3:t.YouTubeApi.createEvent(i,n,"progress");break;case 5:}}},window.onYouTubePlayerAPIReady=function(){t.YouTubeApi.iFrameReady()},window.onYouTubePlayerReady=function(e){t.YouTubeApi.flashReady(e)},window.mejs=t,window.MediaElement=t.MediaElement,function(e,t,i){"use strict";var n={locale:{language:t.i18n&&t.i18n.locale.language||"",strings:t.i18n&&t.i18n.locale.strings||{}},ietf_lang_regex:/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/,methods:{}};n.getLanguage=function(){var e=n.locale.language||window.navigator.userLanguage||window.navigator.language;return n.ietf_lang_regex.exec(e)?e:null},"undefined"!=typeof mejsL10n&&(n.locale.language=mejsL10n.language),n.methods.checkPlain=function(e){var t,i,n={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};e=String(e);for(t in n)n.hasOwnProperty(t)&&(i=new RegExp(t,"g"),e=e.replace(i,n[t]));return e},n.methods.t=function(e,t){return n.locale.strings&&n.locale.strings[t.context]&&n.locale.strings[t.context][e]&&(e=n.locale.strings[t.context][e]),n.methods.checkPlain(e)},n.t=function(e,t){if("string"==typeof e&&e.length>0){var i=n.getLanguage();return t=t||{context:i},n.methods.t(e,t)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},t.i18n=n}(document,t),function(e,t){"use strict";"undefined"!=typeof mejsL10n&&(e[mejsL10n.language]=mejsL10n.strings)}(t.i18n.locale.strings),/*!
 *
 * MediaElementPlayer
 * http://mediaelementjs.com/
 *
 * Creates a controller bar for HTML5 <video> add <audio> tags
 * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)
 *
 * Copyright 2010-2013, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
"undefined"!=typeof e?t.$=e:"undefined"!=typeof ender&&(t.$=ender),function(e){t.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return.05*e.duration},defaultSeekForwardInterval:function(e){return.05*e.duration},setDimensions:!0,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?e.play():e.pause()}},{keys:[38],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.volume+.1,1);t.setVolume(i)}},{keys:[40],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.volume-.1,0);t.setVolume(i)}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(i)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(i)}}},{keys:[70],action:function(e,t){"undefined"!=typeof e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}},{keys:[77],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer()),e.media.muted?e.setMuted(!1):e.setMuted(!0)}}]},t.mepIndex=0,t.players={},t.MediaElementPlayer=function(i,n){if(!(this instanceof t.MediaElementPlayer))return new t.MediaElementPlayer(i,n);var o=this;return o.$media=o.$node=e(i),o.node=o.media=o.$media[0],o.node?"undefined"!=typeof o.node.player?o.node.player:(o.node.player=o,"undefined"==typeof n&&(n=o.$node.data("mejsoptions")),o.options=e.extend({},t.MepDefaults,n),o.id="mep_"+t.mepIndex++,t.players[o.id]=o,o.init(),o):void 0},t.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var i=this,n=t.MediaFeatures,o=e.extend(!0,{},i.options,{success:function(e,t){i.meReady(e,t)},error:function(e){i.handleError(e)}}),s=i.media.tagName.toLowerCase();if(i.isDynamic="audio"!==s&&"video"!==s,i.isDynamic?i.isVideo=i.options.isVideo:i.isVideo="audio"!==s&&i.options.isVideo,n.isiPad&&i.options.iPadUseNativeControls||n.isiPhone&&i.options.iPhoneUseNativeControls)i.$media.attr("controls","controls"),n.isiPad&&null!==i.media.getAttribute("autoplay")&&i.play();else if(n.isAndroid&&i.options.AndroidUseNativeControls);else{i.$media.removeAttr("controls");var a=i.isVideo?t.i18n.t("Video Player"):t.i18n.t("Audio Player");if(e('<span class="mejs-offscreen">'+a+"</span>").insertBefore(i.$media),i.container=e('<div id="'+i.id+'" class="mejs-container '+(t.MediaFeatures.svg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+a+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(i.$media[0].className).insertBefore(i.$media).focus(function(e){if(!i.controlsAreVisible){i.showControls(!0);var t=i.container.find(".mejs-playpause-button > button");t.focus()}}),i.container.addClass((n.isAndroid?"mejs-android ":"")+(n.isiOS?"mejs-ios ":"")+(n.isiPad?"mejs-ipad ":"")+(n.isiPhone?"mejs-iphone ":"")+(i.isVideo?"mejs-video ":"mejs-audio ")),n.isiOS){var r=i.$media.clone();i.container.find(".mejs-mediaelement").append(r),i.$media.remove(),i.$node=i.$media=r,i.node=i.media=r[0]}else i.container.find(".mejs-mediaelement").append(i.$media);i.controls=i.container.find(".mejs-controls"),i.layers=i.container.find(".mejs-layers");var l=i.isVideo?"video":"audio",d=l.substring(0,1).toUpperCase()+l.substring(1);i.options[l+"Width"]>0||i.options[l+"Width"].toString().indexOf("%")>-1?i.width=i.options[l+"Width"]:""!==i.media.style.width&&null!==i.media.style.width?i.width=i.media.style.width:null!==i.media.getAttribute("width")?i.width=i.$media.attr("width"):i.width=i.options["default"+d+"Width"],i.options[l+"Height"]>0||i.options[l+"Height"].toString().indexOf("%")>-1?i.height=i.options[l+"Height"]:""!==i.media.style.height&&null!==i.media.style.height?i.height=i.media.style.height:null!==i.$media[0].getAttribute("height")?i.height=i.$media.attr("height"):i.height=i.options["default"+d+"Height"],i.setPlayerSize(i.width,i.height),o.pluginWidth=i.width,o.pluginHeight=i.height}t.MediaElement(i.$media[0],o),"undefined"!=typeof i.container&&i.controlsAreVisible&&i.container.trigger("controlsshown")},showControls:function(e){var t=this;e="undefined"==typeof e||e,t.controlsAreVisible||(e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0,t.container.trigger("controlsshown")}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0,t.container.trigger("controlsshown")),t.setControlsSize())},hideControls:function(t){var i=this;t="undefined"==typeof t||t,!i.controlsAreVisible||i.options.alwaysShowControls||i.keyboardAction||(t?(i.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(i.controls.css("visibility","hidden").css("display","block"),i.container.find(".mejs-control").css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(e){var t=this;e="undefined"!=typeof e?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(e){var t=this;null!==t.controlsTimer&&(clearTimeout(t.controlsTimer),delete t.controlsTimer,t.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var e=this;e.killControlsTimer(),e.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var e=this;e.showControls(!1),e.controlsEnabled=!0},meReady:function(i,n){var o=this,s=t.MediaFeatures,a=n.getAttribute("autoplay"),r=!("undefined"==typeof a||null===a||"false"===a),l,d;if(!o.created){if(o.created=!0,o.media=i,o.domNode=n,!(s.isAndroid&&o.options.AndroidUseNativeControls||s.isiPad&&o.options.iPadUseNativeControls||s.isiPhone&&o.options.iPhoneUseNativeControls)){o.buildposter(o,o.controls,o.layers,o.media),o.buildkeyboard(o,o.controls,o.layers,o.media),o.buildoverlays(o,o.controls,o.layers,o.media),o.findTracks();for(l in o.options.features)if(d=o.options.features[l],o["build"+d])try{o["build"+d](o,o.controls,o.layers,o.media)}catch(u){}o.container.trigger("controlsready"),o.setPlayerSize(o.width,o.height),o.setControlsSize(),o.isVideo&&(t.MediaFeatures.hasTouch?o.$media.bind("touchstart",function(){o.controlsAreVisible?o.hideControls(!1):o.controlsEnabled&&o.showControls(!1)}):(o.clickToPlayPauseCallback=function(){o.options.clickToPlayPause&&(o.media.paused?o.play():o.pause())},o.media.addEventListener("click",o.clickToPlayPauseCallback,!1),o.container.bind("mouseenter mouseover",function(){o.controlsEnabled&&(o.options.alwaysShowControls||(o.killControlsTimer("enter"),o.showControls(),o.startControlsTimer(2500)))}).bind("mousemove",function(){o.controlsEnabled&&(o.controlsAreVisible||o.showControls(),o.options.alwaysShowControls||o.startControlsTimer(2500))}).bind("mouseleave",function(){o.controlsEnabled&&(o.media.paused||o.options.alwaysShowControls||o.startControlsTimer(1e3))})),o.options.hideVideoControlsOnLoad&&o.hideControls(!1),r&&!o.options.alwaysShowControls&&o.hideControls(),o.options.enableAutosize&&o.media.addEventListener("loadedmetadata",function(e){o.options.videoHeight<=0&&null===o.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(o.setPlayerSize(e.target.videoWidth,e.target.videoHeight),o.setControlsSize(),o.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),i.addEventListener("play",function(){var e;for(e in t.players){var i=t.players[e];i.id==o.id||!o.options.pauseOtherPlayers||i.paused||i.ended||i.pause(),i.hasFocus=!1}o.hasFocus=!0},!1),o.media.addEventListener("ended",function(t){if(o.options.autoRewind)try{o.media.setCurrentTime(0),window.setTimeout(function(){e(o.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(i){}o.media.pause(),o.setProgressRail&&o.setProgressRail(),o.setCurrentRail&&o.setCurrentRail(),o.options.loop?o.play():!o.options.alwaysShowControls&&o.controlsEnabled&&o.showControls()},!1),o.media.addEventListener("loadedmetadata",function(e){o.updateDuration&&o.updateDuration(),o.updateCurrent&&o.updateCurrent(),o.isFullScreen||(o.setPlayerSize(o.width,o.height),o.setControlsSize())},!1),o.container.focusout(function(t){if(t.relatedTarget){var i=e(t.relatedTarget);o.keyboardAction&&0===i.parents(".mejs-container").length&&(o.keyboardAction=!1,o.hideControls(!0))}}),setTimeout(function(){o.setPlayerSize(o.width,o.height),o.setControlsSize()},50),o.globalBind("resize",function(){o.isFullScreen||t.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||o.setPlayerSize(o.width,o.height),o.setControlsSize()}),"youtube"==o.media.pluginType&&(s.isiOS||s.isAndroid)&&o.container.find(".mejs-overlay-play").hide()}r&&"native"==i.pluginType&&o.play(),o.options.success&&("string"==typeof o.options.success?window[o.options.success](o.media,o.domNode,o):o.options.success(o.media,o.domNode,o))}},handleError:function(e){var t=this;t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(t,i){var n=this;if(!n.options.setDimensions)return!1;if("undefined"!=typeof t&&(n.width=t),"undefined"!=typeof i&&(n.height=i),n.height.toString().indexOf("%")>0||"100%"===n.$node.css("max-width")||n.$node[0].currentStyle&&"100%"===n.$node[0].currentStyle.maxWidth){var o=function(){return n.isVideo?n.media.videoWidth&&n.media.videoWidth>0?n.media.videoWidth:null!==n.media.getAttribute("width")?n.media.getAttribute("width"):n.options.defaultVideoWidth:n.options.defaultAudioWidth}(),s=function(){return n.isVideo?n.media.videoHeight&&n.media.videoHeight>0?n.media.videoHeight:null!==n.media.getAttribute("height")?n.media.getAttribute("height"):n.options.defaultVideoHeight:n.options.defaultAudioHeight}(),a=n.container.parent().closest(":visible").width(),r=n.container.parent().closest(":visible").height(),l=n.isVideo||!n.options.autosizeProgress?parseInt(a*s/o,10):s;isNaN(l)&&(l=r),n.container.parent().length>0&&"body"===n.container.parent()[0].tagName.toLowerCase()&&(a=e(window).width(),l=e(window).height()),l&&a&&(n.container.width(a).height(l),n.$media.add(n.container.find(".mejs-shim")).width("100%").height("100%"),n.isVideo&&n.media.setVideoSize&&n.media.setVideoSize(a,l),n.layers.children(".mejs-layer").width("100%").height("100%"))}else n.container.width(n.width).height(n.height),n.layers.children(".mejs-layer").width(n.width).height(n.height);var d=n.layers.find(".mejs-overlay-play"),u=d.find(".mejs-overlay-button");d.height(n.container.height()-n.controls.height()),u.css("margin-top","-"+(u.height()/2-n.controls.height()/2).toString()+"px")},setControlsSize:function(){var t=this,i=0,n=0,o=t.controls.find(".mejs-time-rail"),s=t.controls.find(".mejs-time-total"),a=o.siblings(),r=a.last(),l=null;if(t.container.is(":visible")&&o.length&&o.is(":visible")){t.options&&!t.options.autosizeProgress&&(n=parseInt(o.css("width"),10)),0!==n&&n||(a.each(function(){var t=e(this);"absolute"!=t.css("position")&&t.is(":visible")&&(i+=e(this).outerWidth(!0))}),n=t.controls.width()-i-(o.outerWidth(!0)-o.width()));do o.width(n),s.width(n-(s.outerWidth(!0)-s.width())),"absolute"!=r.css("position")&&(l=r.length?r.position():null,n--);while(null!==l&&l.top>0&&n>0);t.container.trigger("controlsresize")}},buildposter:function(t,i,n,o){var s=this,a=e('<div class="mejs-poster mejs-layer"></div>').appendTo(n),r=t.$media.attr("poster");""!==t.options.poster&&(r=t.options.poster),r?s.setPoster(r):a.hide(),o.addEventListener("play",function(){a.hide()},!1),t.options.showPosterWhenEnded&&t.options.autoRewind&&o.addEventListener("ended",function(){a.show()},!1)},setPoster:function(t){var i=this,n=i.container.find(".mejs-poster"),o=n.find("img");0===o.length&&(o=e('<img width="100%" height="100%" alt="" />').appendTo(n)),o.attr("src",t),n.css({"background-image":"url("+t+")"})},buildoverlays:function(i,n,o,s){var a=this;if(i.isVideo){var r=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(o),l=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(o),d=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(o).bind("click",function(){a.options.clickToPlayPause&&s.paused&&s.play()});s.addEventListener("play",function(){d.hide(),r.hide(),n.find(".mejs-time-buffering").hide(),l.hide()},!1),s.addEventListener("playing",function(){d.hide(),r.hide(),n.find(".mejs-time-buffering").hide(),l.hide()},!1),s.addEventListener("seeking",function(){r.show(),n.find(".mejs-time-buffering").show()},!1),s.addEventListener("seeked",function(){r.hide(),n.find(".mejs-time-buffering").hide()},!1),s.addEventListener("pause",function(){t.MediaFeatures.isiPhone||d.show()},!1),s.addEventListener("waiting",function(){r.show(),n.find(".mejs-time-buffering").show()},!1),s.addEventListener("loadstart",function(){r.show(),n.find(".mejs-time-buffering").show()},!1),s.addEventListener("loadeddata",function(){r.hide(),n.find(".mejs-time-buffering").hide()},!1),s.addEventListener("canplay",function(){r.hide(),n.find(".mejs-time-buffering").hide()},!1),s.addEventListener("error",function(e){a.handleError(e),r.hide(),d.hide(),l.show(),l.find(".mejs-overlay-error").html("Error loading this resource")},!1),s.addEventListener("keydown",function(e){a.onkeydown(i,s,e)},!1)}},buildkeyboard:function(t,i,n,o){var s=this;s.container.keydown(function(){s.keyboardAction=!0}),s.globalBind("keydown",function(e){return s.onkeydown(t,o,e)}),s.globalBind("click",function(i){t.hasFocus=0!==e(i.target).closest(".mejs-container").length})},onkeydown:function(e,t,i){if(e.hasFocus&&e.options.enableKeyboard)for(var n=0,o=e.options.keyActions.length;o>n;n++)for(var s=e.options.keyActions[n],a=0,r=s.keys.length;r>a;a++)if(i.keyCode==s.keys[a])return"function"==typeof i.preventDefault&&i.preventDefault(),s.action(e,t,i.keyCode),!1;return!0},findTracks:function(){var t=this,i=t.$media.find("track");t.tracks=[],i.each(function(i,n){n=e(n),t.tracks.push({srclang:n.attr("srclang")?n.attr("srclang").toLowerCase():"",src:n.attr("src"),kind:n.attr("kind"),label:n.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.load(),this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){this.isLoaded||this.media.load(),this.isLoaded=!0},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var e=this,i,n;for(i in e.options.features)if(n=e.options.features[i],e["clean"+n])try{e["clean"+n](e)}catch(o){}e.isDynamic?e.$node.insertBefore(e.container):(e.$media.prop("controls",!0),e.$node.clone().insertBefore(e.container).show(),e.$node.remove()),"native"!==e.media.pluginType&&e.media.remove(),delete t.players[e.id],"object"==typeof e.container&&e.container.remove(),e.globalUnbind(),delete e.node.player},rebuildtracks:function(){var e=this;e.findTracks(),e.buildtracks(e,e.controls,e.layers,e.media)},resetSize:function(){var e=this;setTimeout(function(){e.setPlayerSize(e.width,e.height),e.setControlsSize()},50)}},function(){function i(t,i){var o={d:[],w:[]};return e.each((t||"").split(" "),function(e,t){var s=t+"."+i;0===s.indexOf(".")?(o.d.push(s),o.w.push(s)):o[n.test(t)?"w":"d"].push(s)}),o.d=o.d.join(" "),o.w=o.w.join(" "),o}var n=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;t.MediaElementPlayer.prototype.globalBind=function(t,n,o){var s=this;t=i(t,s.id),t.d&&e(document).bind(t.d,n,o),t.w&&e(window).bind(t.w,n,o)},t.MediaElementPlayer.prototype.globalUnbind=function(t,n){var o=this;t=i(t,o.id),t.d&&e(document).unbind(t.d,n),t.w&&e(window).unbind(t.w,n)}}(),"undefined"!=typeof e&&(e.fn.mediaelementplayer=function(i){return i===!1?this.each(function(){var t=e(this).data("mediaelementplayer");t&&t.remove(),e(this).removeData("mediaelementplayer")}):this.each(function(){e(this).data("mediaelementplayer",new t.MediaElementPlayer(this,i))}),this},e(document).ready(function(){e(".mejs-player").mediaelementplayer()})),window.MediaElementPlayer=t.MediaElementPlayer}(t.$),function(e){e.extend(t.MepDefaults,{playText:t.i18n.t("Play"),pauseText:t.i18n.t("Pause")}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,i,n,o){function s(e){"play"===e?(l.removeClass("mejs-play").addClass("mejs-pause"),d.attr({title:r.pauseText,"aria-label":r.pauseText})):(l.removeClass("mejs-pause").addClass("mejs-play"),d.attr({title:r.playText,"aria-label":r.playText}))}var a=this,r=a.options,l=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+a.id+'" title="'+r.playText+'" aria-label="'+r.playText+'"></button></div>').appendTo(i).click(function(e){return e.preventDefault(),o.paused?o.play():o.pause(),!1}),d=l.find("button");s("pse"),o.addEventListener("play",function(){s("play")},!1),o.addEventListener("playing",function(){s("play")},!1),o.addEventListener("pause",function(){s("pse")},!1),o.addEventListener("paused",function(){s("pse")},!1)}})}(t.$),function(e){e.extend(t.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(i,n,o,s){var a=this;e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+a.id+'" title="'+a.options.stopText+'" aria-label="'+a.options.stopText+'"></button></div>').appendTo(n).click(function(){s.paused||s.pause(),s.currentTime>0&&(s.setCurrentTime(0),s.pause(),n.find(".mejs-time-current").width("0px"),n.find(".mejs-time-handle").css("left","0px"),n.find(".mejs-time-float-current").html(t.Utility.secondsToTimeCode(0)),n.find(".mejs-currenttime").html(t.Utility.secondsToTimeCode(0)),o.find(".mejs-poster").show())})}})}(t.$),function(e){e.extend(t.MepDefaults,{progessHelpText:t.i18n.t("Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.")}),e.extend(MediaElementPlayer.prototype,{buildprogress:function(i,n,o,s){e('<div class="mejs-time-rail"><span  class="mejs-time-total mejs-time-slider"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(n),n.find(".mejs-time-buffering").hide();var a=this,r=n.find(".mejs-time-total"),l=n.find(".mejs-time-loaded"),d=n.find(".mejs-time-current"),u=n.find(".mejs-time-handle"),c=n.find(".mejs-time-float"),p=n.find(".mejs-time-float-current"),m=n.find(".mejs-time-slider"),h=function(e){var i=r.offset(),n=r.outerWidth(!0),o=0,a=0,l=0,d;d=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,s.duration&&(d<i.left?d=i.left:d>n+i.left&&(d=n+i.left),l=d-i.left,o=l/n,a=.02>=o?0:o*s.duration,f&&a!==s.currentTime&&s.setCurrentTime(a),t.MediaFeatures.hasTouch||(c.css("left",l),p.html(t.Utility.secondsToTimeCode(a)),c.show()))},f=!1,v=!1,g=0,y=!1,b=i.options.autoRewind,w=function(e){var i=s.currentTime,n=t.i18n.t("Time Slider"),o=t.Utility.secondsToTimeCode(i),a=s.duration;m.attr({"aria-label":n,"aria-valuemin":0,"aria-valuemax":a,"aria-valuenow":i,"aria-valuetext":o,role:"slider",tabindex:0})},T=function(){var e=new Date;e-g>=1e3&&s.play()};m.bind("focus",function(e){i.options.autoRewind=!1}),m.bind("blur",function(e){i.options.autoRewind=b}),m.bind("keydown",function(e){new Date-g>=1e3&&(y=s.paused);var t=e.keyCode,i=s.duration,n=s.currentTime;switch(t){case 37:n-=1;break;case 39:n+=1;break;case 38:n+=Math.floor(.1*i);break;case 40:n-=Math.floor(.1*i);break;case 36:n=0;break;case 35:n=i;break;case 10:return void(s.paused?s.play():s.pause());case 13:return void(s.paused?s.play():s.pause());default:return}return n=0>n?0:n>=i?i:Math.floor(n),g=new Date,y||s.pause(),n<s.duration&&!y&&setTimeout(T,1100),s.setCurrentTime(n),e.preventDefault(),e.stopPropagation(),!1}),r.bind("mousedown touchstart",function(e){(1===e.which||0===e.which)&&(f=!0,h(e),a.globalBind("mousemove.dur touchmove.dur",function(e){h(e)}),a.globalBind("mouseup.dur touchend.dur",function(e){f=!1,c.hide(),a.globalUnbind(".dur")}))}).bind("mouseenter",function(e){v=!0,a.globalBind("mousemove.dur",function(e){h(e)}),t.MediaFeatures.hasTouch||c.show()}).bind("mouseleave",function(e){v=!1,f||(a.globalUnbind(".dur"),c.hide())}),s.addEventListener("progress",function(e){i.setProgressRail(e),i.setCurrentRail(e)},!1),s.addEventListener("timeupdate",function(e){i.setProgressRail(e),i.setCurrentRail(e),w(e)},!1),a.container.on("controlsresize",function(){i.setProgressRail(),i.setCurrentRail()}),a.loaded=l,a.total=r,a.current=d,a.handle=u},setProgressRail:function(e){var t=this,i=void 0!==e?e.target:t.media,n=null;i&&i.buffered&&i.buffered.length>0&&i.buffered.end&&i.duration?n=i.buffered.end(0)/i.duration:i&&void 0!==i.bytesTotal&&i.bytesTotal>0&&void 0!==i.bufferedBytes?n=i.bufferedBytes/i.bytesTotal:e&&e.lengthComputable&&0!==e.total&&(n=e.loaded/e.total),null!==n&&(n=Math.min(1,Math.max(0,n)),t.loaded&&t.total&&t.loaded.width(t.total.width()*n))},setCurrentRail:function(){var e=this;if(void 0!==e.media.currentTime&&e.media.duration&&e.total&&e.handle){var t=Math.round(e.total.width()*e.media.currentTime/e.media.duration),i=t-Math.round(e.handle.outerWidth(!0)/2);e.current.width(t),e.handle.css("left",i)}}})}(t.$),function(e){e.extend(t.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,i,n,o){var s=this;e('<div class="mejs-time" role="timer" aria-live="off"><span class="mejs-currenttime">'+(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(i),s.currenttime=s.controls.find(".mejs-currenttime"),o.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(i,n,o,s){var a=this;n.children().last().find(".mejs-currenttime").length>0?e(a.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(a.options.duration>0?t.Utility.secondsToTimeCode(a.options.duration,a.options.alwaysShowHours||a.media.duration>3600,a.options.showTimecodeFrameCount,a.options.framesPerSecond||25):(i.options.alwaysShowHours?"00:":"")+(i.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(n.find(".mejs-time")):(n.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(a.options.duration>0?t.Utility.secondsToTimeCode(a.options.duration,a.options.alwaysShowHours||a.media.duration>3600,a.options.showTimecodeFrameCount,a.options.framesPerSecond||25):(i.options.alwaysShowHours?"00:":"")+(i.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(n)),a.durationD=a.controls.find(".mejs-duration"),s.addEventListener("timeupdate",function(){i.updateDuration()},!1)},updateCurrent:function(){var e=this;e.currenttime&&e.currenttime.html(t.Utility.secondsToTimeCode(e.media.currentTime,e.options.alwaysShowHours||e.media.duration>3600,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))},updateDuration:function(){var e=this;e.container.toggleClass("mejs-long-video",e.media.duration>3600),e.durationD&&(e.options.duration>0||e.media.duration)&&e.durationD.html(t.Utility.secondsToTimeCode(e.options.duration>0?e.options.duration:e.media.duration,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))}})}(t.$),function(e){e.extend(t.MepDefaults,{muteText:t.i18n.t("Mute Toggle"),allyVolumeControlText:t.i18n.t("Use Up/Down Arrow keys to increase or decrease volume."),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(i,n,o,s){if(!t.MediaFeatures.isAndroid&&!t.MediaFeatures.isiOS||!this.options.hideVolumeOnTouchDevices){var a=this,r=a.isVideo?a.options.videoVolume:a.options.audioVolume,l="horizontal"==r?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+a.id+'" title="'+a.options.muteText+'" aria-label="'+a.options.muteText+'"></button></div><a href="javascript:void(0);" class="mejs-horizontal-volume-slider"><span class="mejs-offscreen">'+a.options.allyVolumeControlText+'</span><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></a>').appendTo(n):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+a.id+'" title="'+a.options.muteText+'" aria-label="'+a.options.muteText+'"></button><a href="javascript:void(0);" class="mejs-volume-slider"><span class="mejs-offscreen">'+a.options.allyVolumeControlText+'</span><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></a></div>').appendTo(n),d=a.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),u=a.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),c=a.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),p=a.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),m=function(e,i){if(!d.is(":visible")&&"undefined"==typeof i)return d.show(),m(e,!0),void d.hide();e=Math.max(0,e),e=Math.min(e,1),0===e?(l.removeClass("mejs-mute").addClass("mejs-unmute"),l.children("button").attr("title",t.i18n.t("Unmute")).attr("aria-label",t.i18n.t("Unmute"))):(l.removeClass("mejs-unmute").addClass("mejs-mute"),l.children("button").attr("title",t.i18n.t("Mute")).attr("aria-label",t.i18n.t("Mute")));var n=u.position();if("vertical"==r){var o=u.height(),s=o-o*e;p.css("top",Math.round(n.top+s-p.height()/2)),c.height(o-s),c.css("top",n.top+s)}else{var a=u.width(),h=a*e;p.css("left",Math.round(n.left+h-p.width()/2)),c.width(Math.round(h))}},h=function(e){var t=null,i=u.offset();if("vertical"===r){var n=u.height(),o=e.pageY-i.top;if(t=(n-o)/n,0===i.top||0===i.left)return}else{var a=u.width(),l=e.pageX-i.left;t=l/a}t=Math.max(0,t),t=Math.min(t,1),m(t),0===t?s.setMuted(!0):s.setMuted(!1),s.setVolume(t)},f=!1,v=!1;l.hover(function(){d.show(),v=!0},function(){v=!1,f||"vertical"!=r||d.hide()});var g=function(e){var i=Math.floor(100*s.volume);d.attr({"aria-label":t.i18n.t("volumeSlider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":i,"aria-valuetext":i+"%",role:"slider",tabindex:0})};d.bind("mouseover",function(){v=!0}).bind("mousedown",function(e){return h(e),a.globalBind("mousemove.vol",function(e){h(e)}),a.globalBind("mouseup.vol",function(){f=!1,a.globalUnbind(".vol"),v||"vertical"!=r||d.hide()}),f=!0,!1}).bind("keydown",function(e){var t=e.keyCode,i=s.volume;switch(t){case 38:i+=.1;break;case 40:i-=.1;break;default:return!0}return f=!1,m(i),s.setVolume(i),!1}).bind("blur",function(){d.hide()}),l.find("button").click(function(){s.setMuted(!s.muted)}),l.find("button").bind("focus",function(){d.show()}),s.addEventListener("volumechange",function(e){f||(s.muted?(m(0),l.removeClass("mejs-mute").addClass("mejs-unmute")):(m(s.volume),l.removeClass("mejs-unmute").addClass("mejs-mute"))),g(e)},!1),0===i.options.startVolume&&s.setMuted(!0),"native"===s.pluginType&&s.setVolume(i.options.startVolume),a.container.on("controlsresize",function(){m(s.volume)})}}})}(t.$),function(e){e.extend(t.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:t.i18n.t("Fullscreen")}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,buildfullscreen:function(i,n,o,s){if(i.isVideo){if(i.isInIframe=window.location!=window.parent.location,t.MediaFeatures.hasTrueNativeFullScreen){var a=function(e){i.isFullScreen&&(t.MediaFeatures.isFullScreen()?(i.isNativeFullScreen=!0,i.setControlsSize()):(i.isNativeFullScreen=!1,i.exitFullScreen()))};i.globalBind(t.MediaFeatures.fullScreenEventName,a)}var r=this,l=e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+r.id+'" title="'+r.options.fullscreenText+'" aria-label="'+r.options.fullscreenText+'"></button></div>').appendTo(n);if("native"===r.media.pluginType||!r.options.usePluginFullScreen&&!t.MediaFeatures.isFirefox)l.click(function(){var e=t.MediaFeatures.hasTrueNativeFullScreen&&t.MediaFeatures.isFullScreen()||i.isFullScreen;e?i.exitFullScreen():i.enterFullScreen()});else{var d=null,u=function(){var e=document.createElement("x"),t=document.documentElement,i=window.getComputedStyle,n;return"pointerEvents"in e.style?(e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e),n=i&&"auto"===i(e,"").pointerEvents,t.removeChild(e),!!n):!1}();if(u&&!t.MediaFeatures.isOpera){var c=!1,p=function(){if(c){for(var e in m)m[e].hide();l.css("pointer-events",""),r.controls.css("pointer-events",""),r.media.removeEventListener("click",r.clickToPlayPauseCallback),c=!1}},m={},h=["top","left","right","bottom"],f,v,g=function(){var e=l.offset().left-r.container.offset().left,t=l.offset().top-r.container.offset().top,i=l.outerWidth(!0),n=l.outerHeight(!0),o=r.container.width(),s=r.container.height();for(f in m)m[f].css({position:"absolute",top:0,left:0});m.top.width(o).height(t),m.left.width(e).height(n).css({top:t}),m.right.width(o-e-i).height(n).css({top:t,left:e+i}),m.bottom.width(o).height(s-n-t).css({top:t+n})};for(r.globalBind("resize",function(){g()}),f=0,v=h.length;v>f;f++)m[h[f]]=e('<div class="mejs-fullscreen-hover" />').appendTo(r.container).mouseover(p).hide();l.on("mouseover",function(){if(!r.isFullScreen){var e=l.offset(),t=i.container.offset();s.positionFullscreenButton(e.left-t.left,e.top-t.top,!1),l.css("pointer-events","none"),r.controls.css("pointer-events","none"),r.media.addEventListener("click",r.clickToPlayPauseCallback);for(f in m)m[f].show();g(),c=!0}}),s.addEventListener("fullscreenchange",function(e){r.isFullScreen=!r.isFullScreen,r.isFullScreen?r.media.removeEventListener("click",r.clickToPlayPauseCallback):r.media.addEventListener("click",r.clickToPlayPauseCallback),p()}),r.globalBind("mousemove",function(e){if(c){var t=l.offset();(e.pageY<t.top||e.pageY>t.top+l.outerHeight(!0)||e.pageX<t.left||e.pageX>t.left+l.outerWidth(!0))&&(l.css("pointer-events",""),
r.controls.css("pointer-events",""),c=!1)}})}else l.on("mouseover",function(){null!==d&&(clearTimeout(d),delete d);var e=l.offset(),t=i.container.offset();s.positionFullscreenButton(e.left-t.left,e.top-t.top,!0)}).on("mouseout",function(){null!==d&&(clearTimeout(d),delete d),d=setTimeout(function(){s.hideFullscreenButton()},1500)})}i.fullscreenBtn=l,r.globalBind("keydown",function(e){(t.MediaFeatures.hasTrueNativeFullScreen&&t.MediaFeatures.isFullScreen()||r.isFullScreen)&&27==e.keyCode&&i.exitFullScreen()}),r.normalHeight=0,r.normalWidth=0}},cleanfullscreen:function(e){e.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var i=this;if("native"===i.media.pluginType||!t.MediaFeatures.isFirefox&&!i.options.usePluginFullScreen){if(e(document.documentElement).addClass("mejs-fullscreen"),i.normalHeight=i.container.height(),i.normalWidth=i.container.width(),"native"===i.media.pluginType)if(t.MediaFeatures.hasTrueNativeFullScreen)t.MediaFeatures.requestFullScreen(i.container[0]),i.isInIframe&&setTimeout(function o(){if(i.isNativeFullScreen){var t=window.devicePixelRatio||1,n=.002,s=t*e(window).width(),a=screen.width,r=Math.abs(a-s),l=a*n;r>l?i.exitFullScreen():setTimeout(o,500)}},500);else if(t.MediaFeatures.hasSemiNativeFullScreen)return void i.media.webkitEnterFullscreen();if(i.isInIframe){var n=i.options.newWindowCallback(this);if(""!==n){if(!t.MediaFeatures.hasTrueNativeFullScreen)return i.pause(),void window.open(n,i.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");setTimeout(function(){i.isNativeFullScreen||(i.pause(),window.open(n,i.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}i.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),i.containerSizeTimeout=setTimeout(function(){i.container.css({width:"100%",height:"100%"}),i.setControlsSize()},500),"native"===i.media.pluginType?i.$media.width("100%").height("100%"):(i.container.find(".mejs-shim").width("100%").height("100%"),i.media.setVideoSize(e(window).width(),e(window).height())),i.layers.children("div").width("100%").height("100%"),i.fullscreenBtn&&i.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),i.setControlsSize(),i.isFullScreen=!0,i.container.find(".mejs-captions-text").css("font-size",screen.width/i.width*1*100+"%"),i.container.find(".mejs-captions-position").css("bottom","45px")}},exitFullScreen:function(){var i=this;return clearTimeout(i.containerSizeTimeout),"native"!==i.media.pluginType&&t.MediaFeatures.isFirefox?void i.media.setFullscreen(!1):(t.MediaFeatures.hasTrueNativeFullScreen&&(t.MediaFeatures.isFullScreen()||i.isFullScreen)&&t.MediaFeatures.cancelFullScreen(),e(document.documentElement).removeClass("mejs-fullscreen"),i.container.removeClass("mejs-container-fullscreen").width(i.normalWidth).height(i.normalHeight),"native"===i.media.pluginType?i.$media.width(i.normalWidth).height(i.normalHeight):(i.container.find(".mejs-shim").width(i.normalWidth).height(i.normalHeight),i.media.setVideoSize(i.normalWidth,i.normalHeight)),i.layers.children("div").width(i.normalWidth).height(i.normalHeight),i.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),i.setControlsSize(),i.isFullScreen=!1,i.container.find(".mejs-captions-text").css("font-size",""),void i.container.find(".mejs-captions-position").css("bottom",""))}})}(t.$),function(e){e.extend(t.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x"}),e.extend(MediaElementPlayer.prototype,{buildspeed:function(t,i,n,o){var s=this;if("native"==s.media.pluginType){var a=null,r=null,l=null,d=null,u='<div class="mejs-button mejs-speed-button"><button type="button">'+s.options.defaultSpeed+s.options.speedChar+'</button><div class="mejs-speed-selector"><ul>';-1===e.inArray(s.options.defaultSpeed,s.options.speeds)&&s.options.speeds.push(s.options.defaultSpeed),s.options.speeds.sort(function(e,t){return parseFloat(t)-parseFloat(e)});for(var c=0,p=s.options.speeds.length;p>c;c++)d=s.id+"-speed-"+s.options.speeds[c],u+='<li><input type="radio" name="speed" value="'+s.options.speeds[c]+'" id="'+d+'" '+(s.options.speeds[c]==s.options.defaultSpeed?" checked":"")+' /><label for="'+d+'" '+(s.options.speeds[c]==s.options.defaultSpeed?' class="mejs-speed-selected"':"")+">"+s.options.speeds[c]+s.options.speedChar+"</label></li>";u+="</ul></div></div>",a=e(u).appendTo(i),r=a.find(".mejs-speed-selector"),l=s.options.defaultSpeed,r.on("click",'input[type="radio"]',function(){var t=e(this).attr("value");l=t,o.playbackRate=parseFloat(t),a.find("button").html(t+s.options.speedChar),a.find(".mejs-speed-selected").removeClass("mejs-speed-selected"),a.find('input[type="radio"]:checked').next().addClass("mejs-speed-selected")}),r.height(a.find(".mejs-speed-selector ul").outerHeight(!0)+a.find(".mejs-speed-translations").outerHeight(!0)).css("top",-1*r.height()+"px")}}})}(t.$),function(e){e.extend(t.MepDefaults,{startLanguage:"",tracksText:t.i18n.t("Captions/Subtitles"),tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,cleartracks:function(e,t,i,n){e&&(e.captions&&e.captions.remove(),e.chapters&&e.chapters.remove(),e.captionsText&&e.captionsText.remove(),e.captionsButton&&e.captionsButton.remove())},buildtracks:function(i,n,o,s){if(0!==i.tracks.length){var a=this,r=a.options.tracksAriaLive?'role="log" aria-live="assertive" aria-atomic="false"':"",l;if(a.domNode.textTracks)for(l=a.domNode.textTracks.length-1;l>=0;l--)a.domNode.textTracks[l].mode="hidden";a.cleartracks(i,n,o,s),i.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(o).hide(),i.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" '+r+'><span class="mejs-captions-text"></span></div></div>').prependTo(o).hide(),i.captionsText=i.captions.find(".mejs-captions-text"),i.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+a.id+'" title="'+a.options.tracksText+'" aria-label="'+a.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+i.id+'_captions" id="'+i.id+'_captions_none" value="none" checked="checked" /><label for="'+i.id+'_captions_none">'+t.i18n.t("None")+"</label></li></ul></div></div>").appendTo(n);var d=0;for(l=0;l<i.tracks.length;l++)"subtitles"==i.tracks[l].kind&&d++;for(a.options.toggleCaptionsButtonWhenOnlyOne&&1==d?i.captionsButton.on("click",function(){null===i.selectedTrack?lang=i.tracks[0].srclang:lang="none",i.setTrack(lang)}):(i.captionsButton.on("mouseenter focusin",function(){e(this).find(".mejs-captions-selector").css("visibility","visible")}).on("click","input[type=radio]",function(){lang=this.value,i.setTrack(lang)}),i.captionsButton.on("mouseleave focusout",function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")})),i.options.alwaysShowControls?i.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):i.container.bind("controlsshown",function(){i.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){s.paused||i.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),i.trackToLoad=-1,i.selectedTrack=null,i.isLoadingTrack=!1,l=0;l<i.tracks.length;l++)"subtitles"==i.tracks[l].kind&&i.addTrackButton(i.tracks[l].srclang,i.tracks[l].label);i.loadNextTrack(),s.addEventListener("timeupdate",function(e){i.displayCaptions()},!1),""!==i.options.slidesSelector&&(i.slidesContainer=e(i.options.slidesSelector),s.addEventListener("timeupdate",function(e){i.displaySlides()},!1)),s.addEventListener("loadedmetadata",function(e){i.displayChapters()},!1),i.container.hover(function(){i.hasChapters&&(i.chapters.css("visibility","visible"),i.chapters.fadeIn(200).height(i.chapters.find(".mejs-chapter").outerHeight()))},function(){i.hasChapters&&!s.paused&&i.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),a.container.on("controlsresize",function(){a.adjustLanguageBox()}),null!==i.node.getAttribute("autoplay")&&i.chapters.css("visibility","hidden")}},setTrack:function(e){var t=this,i;if("none"==e)t.selectedTrack=null,t.captionsButton.removeClass("mejs-captions-enabled");else for(i=0;i<t.tracks.length;i++)if(t.tracks[i].srclang==e){null===t.selectedTrack&&t.captionsButton.addClass("mejs-captions-enabled"),t.selectedTrack=t.tracks[i],t.captions.attr("lang",t.selectedTrack.srclang),t.displayCaptions();break}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(i){var n=this,o=n.tracks[i],s=function(){o.isLoaded=!0,n.enableTrackButton(o.srclang,o.label),n.loadNextTrack()};e.ajax({url:o.src,dataType:"text",success:function(e){"string"==typeof e&&/<tt\s+xml/gi.exec(e)?o.entries=t.TrackFormatParser.dfxp.parse(e):o.entries=t.TrackFormatParser.webvtt.parse(e),s(),"chapters"==o.kind&&n.media.addEventListener("play",function(e){n.media.duration>0&&n.displayChapters(o)},!1),"slides"==o.kind&&n.setupSlides(o)},error:function(){n.removeTrackButton(o.srclang),n.loadNextTrack()}})},enableTrackButton:function(i,n){var o=this;""===n&&(n=t.language.codes[i]||i),o.captionsButton.find("input[value="+i+"]").prop("disabled",!1).siblings("label").html(n),o.options.startLanguage==i&&e("#"+o.id+"_captions_"+i).prop("checked",!0).trigger("click"),o.adjustLanguageBox()},removeTrackButton:function(e){var t=this;t.captionsButton.find("input[value="+e+"]").closest("li").remove(),t.adjustLanguageBox()},addTrackButton:function(i,n){var o=this;""===n&&(n=t.language.codes[i]||i),o.captionsButton.find("ul").append(e('<li><input type="radio" name="'+o.id+'_captions" id="'+o.id+"_captions_"+i+'" value="'+i+'" disabled="disabled" /><label for="'+o.id+"_captions_"+i+'">'+n+" (loading)</label></li>")),o.adjustLanguageBox(),o.container.find(".mejs-captions-translations option[value="+i+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(i=0;i<e.tracks.length;i++)if("subtitles"==e.tracks[i].kind&&e.tracks[i].isLoaded){t=!0;break}t||(e.captionsButton.hide(),e.setControlsSize())}},displayCaptions:function(){if("undefined"!=typeof this.tracks){var e=this,t,i=e.selectedTrack;if(null!==i&&i.isLoaded){for(t=0;t<i.entries.times.length;t++)if(e.media.currentTime>=i.entries.times[t].start&&e.media.currentTime<=i.entries.times[t].stop)return e.captionsText.html(i.entries.text[t]).attr("class","mejs-captions-text "+(i.entries.times[t].identifier||"")),void e.captions.show().height(0);e.captions.hide()}else e.captions.hide()}},setupSlides:function(e){var t=this;t.slides=e,t.slides.entries.imgs=[t.slides.entries.text.length],t.showSlide(0)},showSlide:function(t){if("undefined"!=typeof this.tracks&&"undefined"!=typeof this.slidesContainer){var i=this,n=i.slides.entries.text[t],o=i.slides.entries.imgs[t];"undefined"==typeof o||"undefined"==typeof o.fadeIn?i.slides.entries.imgs[t]=o=e('<img src="'+n+'">').on("load",function(){o.appendTo(i.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):o.is(":visible")||o.is(":animated")||o.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if("undefined"!=typeof this.slides){var e=this,t=e.slides,i;for(i=0;i<t.entries.times.length;i++)if(e.media.currentTime>=t.entries.times[i].start&&e.media.currentTime<=t.entries.times[i].stop)return void e.showSlide(i)}},displayChapters:function(){var e=this,t;for(t=0;t<e.tracks.length;t++)if("chapters"==e.tracks[t].kind&&e.tracks[t].isLoaded){e.drawChapters(e.tracks[t]),e.hasChapters=!0;break}},drawChapters:function(i){var n=this,o,s,a=0,r=0;for(n.chapters.empty(),o=0;o<i.entries.times.length;o++)s=i.entries.times[o].stop-i.entries.times[o].start,a=Math.floor(s/n.media.duration*100),(a+r>100||o==i.entries.times.length-1&&100>a+r)&&(a=100-r),n.chapters.append(e('<div class="mejs-chapter" rel="'+i.entries.times[o].start+'" style="left: '+r.toString()+"%;width: "+a.toString()+'%;"><div class="mejs-chapter-block'+(o==i.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+i.entries.text[o]+'</span><span class="ch-time">'+t.Utility.secondsToTimeCode(i.entries.times[o].start)+"&ndash;"+t.Utility.secondsToTimeCode(i.entries.times[o].stop)+"</span></div></div>")),r+=a;n.chapters.find("div.mejs-chapter").click(function(){n.media.setCurrentTime(parseFloat(e(this).attr("rel"))),n.media.paused&&n.media.play()}),n.chapters.show()}}),t.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},t.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(i){for(var n=0,o=t.TrackFormatParser.split2(i,/\r?\n/),s={text:[],times:[]},a,r,l;n<o.length;n++){if(a=this.pattern_timecode.exec(o[n]),a&&n<o.length){for(n-1>=0&&""!==o[n-1]&&(l=o[n-1]),n++,r=o[n],n++;""!==o[n]&&n<o.length;)r=r+"\n"+o[n],n++;r=e.trim(r).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),s.text.push(r),s.times.push({identifier:l,start:0===t.Utility.convertSMPTEtoSeconds(a[1])?.2:t.Utility.convertSMPTEtoSeconds(a[1]),stop:t.Utility.convertSMPTEtoSeconds(a[3]),settings:a[5]})}l=""}return s}},dfxp:{parse:function(i){i=e(i).filter("tt");var n=0,o=i.children("div").eq(0),s=o.find("p"),a=i.find("#"+o.attr("style")),r,l,d={text:[],times:[]};if(a.length){var u=a.removeAttr("id").get(0).attributes;if(u.length)for(r={},n=0;n<u.length;n++)r[u[n].name.split(":")[1]]=u[n].value}for(n=0;n<s.length;n++){var c,p={start:null,stop:null,style:null};if(s.eq(n).attr("begin")&&(p.start=t.Utility.convertSMPTEtoSeconds(s.eq(n).attr("begin"))),!p.start&&s.eq(n-1).attr("end")&&(p.start=t.Utility.convertSMPTEtoSeconds(s.eq(n-1).attr("end"))),s.eq(n).attr("end")&&(p.stop=t.Utility.convertSMPTEtoSeconds(s.eq(n).attr("end"))),!p.stop&&s.eq(n+1).attr("begin")&&(p.stop=t.Utility.convertSMPTEtoSeconds(s.eq(n+1).attr("begin"))),r){c="";for(var m in r)c+=m+":"+r[m]+";"}c&&(p.style=c),0===p.start&&(p.start=.2),d.times.push(p),l=e.trim(s.eq(n).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),d.text.push(l),0===d.times.start&&(d.times.start=2)}return d}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(t.TrackFormatParser.split2=function(e,t){var i=[],n="",o;for(o=0;o<e.length;o++)n+=e.substring(o,o+1),t.test(n)&&(i.push(n.replace(t,"")),n="");return i.push(n),i})}(t.$),function(e){e.extend(t.MepDefaults,{contextMenuItems:[{render:function(e){return"undefined"==typeof e.enterFullScreen?null:e.isFullScreen?t.i18n.t("Turn off Fullscreen"):t.i18n.t("Go Fullscreen")},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?t.i18n.t("Unmute"):t.i18n.t("Mute")},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(e){return t.i18n.t("Download Video")},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t,i,n,o){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){return t.isContextMenuEnabled?(e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1):void 0}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},cleancontextmenu:function(e){e.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;null!=e&&(clearTimeout(e),delete e,e=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,i){for(var n=this,o="",s=n.options.contextMenuItems,a=0,r=s.length;r>a;a++)if(s[a].isSeparator)o+='<div class="mejs-contextmenu-separator"></div>';else{var l=s[a].render(n);null!=l&&(o+='<div class="mejs-contextmenu-item" data-itemindex="'+a+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}n.contextMenu.empty().append(e(o)).css({top:i,left:t}).show(),n.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),i=parseInt(t.data("itemindex"),10),o=n.options.contextMenuItems[i];"undefined"!=typeof o.show&&o.show(t,n),t.click(function(){"undefined"!=typeof o.click&&o.click(n),n.contextMenu.hide()})}),setTimeout(function(){n.killControlsTimer("rev3")},100)}})}(t.$),function(e){e.extend(t.MepDefaults,{postrollCloseText:t.i18n.t("Close")}),e.extend(MediaElementPlayer.prototype,{buildpostroll:function(t,i,n,o){var s=this,a=s.container.find('link[rel="postroll"]').attr("href");"undefined"!=typeof a&&(t.postroll=e('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+s.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(n).hide(),s.media.addEventListener("ended",function(i){e.ajax({dataType:"html",url:a,success:function(e,t){n.find(".mejs-postroll-layer-content").html(e)}}),t.postroll.show()},!1))}})}(t.$)});
